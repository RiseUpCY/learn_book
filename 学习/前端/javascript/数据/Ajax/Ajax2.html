<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Ajax learning</title>
		<style>
			.box{border:1px solid #aaa;height: 200px;width: 300px;}
		</style>
	</head>
	<body>
		<div id="box1" class="box"></div>
		<button id="button1" onclick="Ajx1()">button</button>
		<div id="box2" class="box"></div>
		<button id="button2" onclick="Ajx2()">button</button>
	</body>
	<script>
		var v1;
		//创建一个实例
		function loadXHR(url,myfun){
			if(window.XMLHttpRequest){
				v1=new XMLHttpRequest();
			}else{
				v1=new ActiveXObject("Microsoft.XMLHTTP");
			}
			v1.onreadystatechange=myfun;
			v1.open("GET",url,true);
			v1.send();
		}
		
		function Ajx1(){
			//用匿名函数当作回调函数实现页面多个ajax的代码复用
			loadXHR("1.txt",function(){
				if(v1.readyState==4&&v1.status==200){
					document.getElementById('box1').innerHTML=v1.responseText;
				}
			});
		}
		function Ajx2(){
			//用匿名函数当作回调函数实现页面多个ajax的代码复用
			loadXHR("2.txt",function(){
				if(v1.readyState==4&&v1.status==200){
					document.getElementById('box2').innerHTML=v1.responseText;
				}
			});
		}
		
	</script>
</html>
